{% extends "base.html" %}
{% block content %}
<h1>{{ deck.title }}</h1>
<div class="muted">{{ deck.language.name }} ({{ deck.language.code }})</div>

<div class="row" style="gap:8px; margin-top:12px;">
  {% if deck.created_by_id == user.id %}
    <a class="btn" href="{% url 'deck_visibility' deck.id %}">
      Visibility: {% if deck.is_public %}Public{% else %}Private{% endif %}
    </a>
  {% endif %}
  <a class="btn btn-primary" href="{% url 'card_create' deck.id %}">Add card</a>
  <a class="btn" href="{% url 'library' %}">Back to library</a>
</div>

<div class="row" style="gap:8px; margin-top:12px;">
  <a class="btn" href="{% url 'deck_export_csv' deck.id %}">Export CSV</a>
  <a class="btn" href="{% url 'deck_import_csv' deck.id %}">Import CSV</a>
</div>

{% if not cards %}
  <p class="muted" style="margin-top:12px;">No cards yet.</p>
{% else %}
  <div style="margin-top:12px;">
    {% for c in cards %}
      <div class="card">
        <b>{{ c.word }}</b>
        {% if c.translation %}<div class="muted">{{ c.translation }}</div>{% endif %}
        {% if c.context_sentence %}<div class="muted">{{ c.context_sentence }}</div>{% endif %}

        {% if c.created_by_id == user.id %}
          <div style="margin-top:8px;">
            <a class="btn" href="{% url 'card_edit' c.id %}?next={% url 'deck_manage' deck.id %}">Edit</a>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
